<workunit schemaName="vw_waterworks_account" entitySchemaName="waterworks_account"
          allowCreate="false" allowEdit="true">

    <invokers>
        <invoker folderid="/menucategory/waterworks/account" caption="Capture Customer Account" 
                 action="create" role="MASTER" index="4"/>
        
        <!-- create or open -->
        <invoker type="vw_waterworks_account:create" caption="Waterworks Customer Account (Capture)" 
                 action="create" target="window"/>        
        
        <invoker type="vw_waterworks_account:open" 
                 formTitle="Waterworks Account (#{entity.acctno}) #{entity.acctname}" 
                 formId="#{entity.objid}"
                 action="open" target="window">
            <action role="MASTER" /> 
            <action role="SHARED" allowEdit="false" allowCreate="false"/> 
        </invoker>     
        
        <invoker type="formActions" action="approve" caption="Approve" 
                 role="APPROVER"
                 visibleWhen="#{ entity.state == 'DRAFT' &amp;&amp; mode=='read' }" /> 
                 
        <invoker type="formActions" action="generateBill" caption="Generate Bill" 
                 visibleWhen="#{ entity.currentbillid ==null }" /> 
        
        <!-- subitem actions -->
        <invoker type="ledgerActions" action="addLedgerEntry" caption="Add Entry" visibleWhen="#{entity.state=='DRAFT'}"/>
        <invoker type="ledgerActions" action="viewLedgerPayment" caption="View Payment Details" />
               
    </invokers>
    
    <code class="com.rameses.gov.etracs.waterworks.models.WaterworksAccountModel" />    

    <pages>
        <page template="com.rameses.gov.etracs.waterworks.views.WaterworksAccountPage"/>
    </pages>    
    
</workunit>
