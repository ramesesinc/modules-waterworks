<workunit schemaName="vw_waterworks_bill" entitySchemaName="waterworks_bill"
        allowCreate="false" allowEdit="false" allowDelete="false">
    <invokers>
        
        <invoker type="vw_waterworks_account:form:formActions" 
                 caption="View Current Bill" 
                 visibleWhen="#{ mode=='read' &amp;&amp; entity.bill?.objid!=null &amp;&amp; entity.bill?.state != 'DRAFT'  }" 
                 target="popup"
                 index="200"
                 action="openBillFromAccount" /> 


        <invoker type="vw_waterworks_account:form:billActions" 
                 caption="Generate Next Bill" 
                 visibleWhen="#{ mode=='read' &amp;&amp; entity.bill?.objid!=null &amp;&amp; entity.bill?.state != 'DRAFT'  }" 
                 target="popup"
                 index="200"
                 action="createFromAccount" /> 

        <invoker type="vw_waterworks_bill:open" 
                 caption="View Bill" 
                 target="popup"
                 action="open" />          

        <!-- this hooks to formActions-->
        <invoker type="formActions" caption="Close" action="_close" immediate="true" />


        <!-- BILL ACTIONS -->
        <invoker type="billActions" caption="Apply Credits" action="applyCredits" 
            visibleWhen="#{entity.totalcredits &gt; 0 &amp;&amp; entity.totalunpaid &gt; 0 }"
            immediate="true" />

        <invoker type="billActions" caption="Edit Reading" action="editReading" 
            visibleWhen="#{ readingPosted == false }"
            immediate="true" />
        
    </invokers>
    <code class="com.rameses.gov.etracs.waterworks.models.WaterworksBillModel" />
    <pages>
        <page template="com.rameses.gov.etracs.waterworks.views.WaterworksBillPage" />
    </pages>
</workunit>
